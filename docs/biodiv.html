<html>
<head>
    <script src="js/utils.js"></script>
    <script src="js/settingTable.js"></script>
    <script src="js/occurrenceTable.js"></script>
    <script src="js/sortable.js"></script>
    <script src="js/gps.js"></script>
    <script src="js/fullScreen.js"></script>
    <script src="js/inhibitClose.js"></script>
    <script src="download.js"></script>

    <link rel="stylesheet" href="css/table.css">
    <link rel="stylesheet" href="css/fullScreen.css">

</head>

<body>


<script>
// // // // // // // // // // // // // // // // // // // 
// 
// Search
// 
// // // // // // // // // // // // // // // // // // // 
function searchTable() {
  var text = "search_text";
  var input  = new RegExp(document.getElementById(text).value, 'i');  // i: case-insensitive
  var table  = document.getElementById("table_setting");
  var tr     = table.getElementsByTagName("tr");

  // Loop through all table rows, and hide those who don't match the search query
  for (let i = 0; i < tr.length; i++) {
    var td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      var txtValue = td.firstChild.value;
      if (input.test(txtValue)) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }
}
</script>


<input type="search" id="search_text" onkeyup="searchTable()" placeholder="Search text input">



<script>
// // // // // // // // // // // // // // // // // // // 
// 
// TODO: Change class names
//       table_setting_1, ts_colnames
//       table_setting_2, ts_inputtypes
//       table_setting_3, ts_option
// 
// // // // // // // // // // // // // // // // // // // 




// // // // // // // // // // // // // // // // // // // 
// 
// TODO    if(data_types === "select_option") [[ GET OPTIONS ]]
// 
// // // // // // // // // // // // // // // // // // // 
// 
// get data from a table for download
// getTableData("occurrence");

// local data
// https://developer.mozilla.org/ja/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage
// https://qiita.com/masuda-sankosc/items/cff6131efd6e1b5138e6
// https://qiita.com/w-tdon/items/81034bd3006806f7d7c3
</script>


<script>
// // // // // // // // // // // // // // // // // // // 
// 
//       tab (OK)
// 
// // // // // // // // // // // // // // // // // // // 
// https://allabout.co.jp/gm/gc/23969/
// tab.html
// tab.js
// tab.css
</script>



<hr>

<p>
  <table id="table_setting"></table>
  <script>
    createSettingTable('table_setting')
  </script>
</p>

<hr>

<p>
  <table id='occurrence'></table>
  <input type="button" value="create occurrence table"  onclick="createOccurrenceTable(occ_tbl)" />
  <input type="button" value="add row"  onclick="cloneRows(occ_tbl)" />
  <input id="clone_n_row" type="number" value="5" step="1", min="1" max="20">

  <script>
    // variables for sotable table
    let occ_tbl = 'occurrence';
    var column_no = 0;       // now clicked
    var column_no_prev = 0;  // previous clicked
    var dir = "asc";
  </script>
</p>


<p>
  <!--  TODO: generate ENTIRELY NEW table for each plot                                                   -->
  <!--  get table name from input tag as text and use it                                                  -->
  <!--    <input id="new_table_name" type="text"  placeholder="table name: stand_01" />                   -->
  <!--    <input type="button" value="create occurrence table"  onclick="createNewOccurrenceTable()" />   -->
  <!--  TODO: generate add row button and clone_n_row input like below                                    -->
  <!--  <input type="button" value="add row"  onclick="cloneRows()" />                                    -->
  <!--  <input id="clone_n_row" type="number" value="5" step="1", min="1" max="20">                       -->

  <!--  Test code for generate ENTIRELY NEW table  -->
  <p id="table">
  </p>
  <script>
  function generateTable(id_table){
    table = document.createElement('table');
    table.setAttribute('id', id_table);
    document.getElementById('table').appendChild(table);
  }
  generateTable("a");
  generateTable("b");
  </script>

</p>


<hr>

<script>
// // // // // // // // // // // // // // // // // // // 
// 
// Launch mailer
// 
// // // // // // // // // // // // // // // // // // // 
//    https://rukiadia.hatenablog.jp/entry/2014/02/19/132445
function launchMailer(){
  location.href = 'mailto: matutosi@gmail.com' + '?subject="text"' + '&body="testmail"';
}
</script>
<input type='button' value="launch mailer" onclick="launchMailer()" />

<hr>

<script>
// // // // // // // // // // // // // // // // // // // 
// 
// Switch full screen
// 
// // // // // // // // // // // // // // // // // // // 
</script>
<input type="button" value="Switch screan show"  onclick="switchFullScreen()" />


<hr>

<script>
// // // // // // // // // // // // // // // // // // // 
// 
// GPS 
// 
// // // // // // // // // // // // // // // // // // // 
</script>
<input type="button" value="start getting GPS" onclick="startWatchPosition()" />
<input type="button" value="stop  getting GPS" onclick="stopWatchPosition()" />


</body>
</html>
